extends layout
block content

    .event-page
        .event-card-page
            h1.event-title #{event.title}

            .event-info
                .info-line
                    span.label Number of registrations:
                    span.value #{registrationCount}

                .info-line
                    span.label Date:
                    span.value #{event.date.toDateString()}

                .info-line
                    span.label Created by:
                    span.value #{event.createdBy.username}

                .info-line
                    span.label Location:
                    span.value #{event.location}

                .info-line
                    span.label Price:
                    span.value #{event.ticketPrice} â‚¬

                .info-line
                    span.label Target audience:
                    span.value #{event.targetAudience}

            // Join / Leave Button
            if user != null
                if event.createdBy != user.id && user.isApproved
                    form(action=`/event/${event._id}/join`, method="POST")
                        if (!registration)
                            input.btn(type="submit", value="Join event")
                        else
                            input.btn(type="submit", value="Leave event")
                else
                    br
            else
                a(href=`/login?redirect=/event/${event._id}`) Log in to join

        .description-card
            h2 Description
            p #{event.description}

        if event.promoURL != null
            .promo-card
                h2 Promo video
                .youtube-embed-container
                    .youtube-placeholder(style="display: flex;")
                        .placeholder-content
                            svg(width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor")
                                path(d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z")
                                polygon(points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02")
                            h3 YouTube Video Blocked
                            p Please accept analytics cookies to watch this video
                            button.open-preferences(onclick="CookieConsent.showPreferences()") Manage Cookie Settings
                    
                    iframe.youtube-iframe(
                        data-src=event.promoURL
                        width="100%"
                        height="400"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen
                        style="display: none;"
                    )


    br
    .share-section
        span.share-label Share this on:
        .shareon
            a.copy-url() Copy URL
            a.facebook() Facebook
            a.reddit() Reddit
            a.print() Print
            a.email(data-title=`Check out this cool event ${event.title}!`) Email
            a.whatsapp(data-title=`Check out this cool event ${event.title}!`, data-text='I found this cool event on www.eventlink.com and I want to invite you!') Whatsapp


    
